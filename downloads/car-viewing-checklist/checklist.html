<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First Car Viewing Checklist - Carbi</title>
    <style>
        @media print {
            body {
                margin: 0;
                font-size: 11pt;
            }

            .no-print {
                display: none;
            }

            .page-break {
                page-break-before: always;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.4;
            color: #0F172A;
            background: white;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            color: #1E40AF;
            padding: 30px 20px;
            border: 2px solid #E2E8F0;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }

        .logo svg {
            margin-right: 15px;
        }

        .logo-text {
            font-size: 2.5em;
            font-weight: 700;
            color: #1E40AF;
        }

        .header h1 {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 1em;
            opacity: 0.9;
        }

        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #1E40AF;
            border: 1px solid #E2E8F0;
        }

        .section h2 {
            color: #1E40AF;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .section h2 .icon {
            font-size: 1.2em;
            margin-right: 10px;
        }

        .section h3 {
            color: #0F172A;
            font-size: 1.1em;
            font-weight: 600;
            margin: 20px 0 10px 0;
        }

        .checklist {
            list-style: none;
            margin: 15px 0;
        }

        .checklist li {
            margin: 8px 0;
            display: flex;
            align-items: flex-start;
        }

        .checklist input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 2px;
            transform: scale(1.2);
        }

        .red-flag {
            background: white;
            border: 2px solid #EF4444;
            margin: 10px 0;
            padding: 10px 15px;
            border-radius: 5px;
        }

        .red-flag h3 {
            color: #DC2626;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .red-flag ul {
            list-style: none;
        }

        .red-flag li {
            color: #DC2626;
            margin: 5px 0;
            display: flex;
            align-items: flex-start;
        }

        .red-flag li::before {
            content: "‚ùå";
            margin-right: 8px;
            flex-shrink: 0;
        }

        .notes-section {
            background: white;
            border: 2px dashed #CBD5E1;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .notes-section h3 {
            color: #1E40AF;
            margin-bottom: 15px;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            align-items: center;
        }

        .form-row label {
            font-weight: 500;
            min-width: 120px;
        }

        .form-row input {
            border: none;
            border-bottom: 1px solid #CBD5E1;
            padding: 5px 0;
            flex: 1;
            background: transparent;
        }

        .rating {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .rating span {
            font-size: 1.5em;
            color: #D1D5DB;
            cursor: pointer;
        }

        .cta-section {
            background: white;
            color: #1E40AF;
            padding: 30px;
            border: 3px solid #1E40AF;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }

        .cta-section h2 {
            color: #1E40AF;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .cta-section p {
            font-size: 1.1em;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .cta-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .cta-features div {
            display: flex;
            align-items: center;
        }

        .cta-features div::before {
            content: "‚úÖ";
            margin-right: 10px;
        }

        .website {
            background: #1E40AF;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1.2em;
            display: inline-block;
            margin-top: 15px;
        }

        .safety-reminder {
            background: white;
            border: 2px solid #F59E0B;
        }

        .safety-reminder h2 {
            color: #92400E;
        }

        /* Toolkit link hover effects */
        .cta-section a[href^="/downloads"]:hover {
            border-color: #0EA5E9 !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }

        .footer {
            text-align: center;
            color: #64748B;
            font-size: 0.9em;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #E2E8F0;
        }

        .save-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #E2E8F0;
            font-size: 0.9em;
            min-height: 40px;
        }

        #lastSaved {
            color: #10B981;
            font-weight: 500;
            margin-left: auto;
            margin-right: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #lastSaved.visible {
            opacity: 1;
        }

        #lastSavedBottom {
            color: #10B981;
            font-weight: 500;
            margin-left: auto;
            margin-right: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #lastSavedBottom.visible {
            opacity: 1;
        }

        .clear-btn {
            background: #1E40AF;
            color: white;
            border: 2px solid #1E40AF;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-btn:hover {
            background: #1E3A8A;
            border-color: #1E3A8A;
        }

        .clear-btn.secondary {
            background: white;
            color: #DC2626;
            border-color: #DC2626;
            margin-left: 10px;
        }

        .clear-btn.secondary:hover {
            background: #DC2626;
            color: white;
        }

        .spinner {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        textarea {
            font-family: inherit;
            resize: vertical;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 20px 15px;
            }

            .logo-text {
                font-size: 2em;
            }

            .header h1 {
                font-size: 1.4em;
            }

            .section {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.2em;
            }

            .section h3 {
                font-size: 1em;
            }

            /* Bigger checkboxes for easier tapping */
            .checklist input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 15px;
                margin-top: 4px;
            }

            .checklist li {
                margin: 12px 0;
                line-height: 1.5;
            }

            /* Better form inputs on mobile */
            .form-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .form-row label {
                min-width: auto;
                margin-bottom: 5px;
                font-size: 0.95em;
            }

            .form-row input {
                width: 100%;
                padding: 12px 8px;
                font-size: 16px;
                /* Prevents zoom on iOS */
                border: 1px solid #CBD5E1 !important;
                border-radius: 6px;
                background: white;
            }

            /* Bigger textarea */
            textarea {
                font-size: 16px !important;
                /* Prevents zoom on iOS */
                padding: 12px !important;
                min-height: 100px !important;
            }

            /* Bigger star rating */
            .rating span {
                font-size: 2em;
                padding: 8px;
            }

            /* Better radio buttons */
            .form-row input[type="radio"] {
                transform: scale(1.3);
                margin: 0 8px 0 0 !important;
            }

            .form-row label:has(input[type="radio"]) {
                display: flex;
                align-items: center;
                padding: 10px 0;
                margin: 0 !important;
            }

            /* Stack decision radio buttons vertically */
            .form-row:has(input[type="radio"]) {
                gap: 5px;
            }

            /* Better CTA section */
            .cta-features {
                grid-template-columns: 1fr;
            }

            .cta-section {
                padding: 20px 15px;
            }

            .cta-section h2 {
                font-size: 1.4em;
            }

            /* Better buttons on mobile */
            .save-controls {
                flex-direction: column;
                gap: 12px;
                align-items: stretch;
            }

            .save-controls>div:first-child {
                display: flex;
                flex-direction: column;
                gap: 10px;
                width: 100%;
            }

            .clear-btn {
                width: 100%;
                margin-left: 0 !important;
                padding: 14px 16px;
                font-size: 1em;
            }

            #lastSaved,
            #lastSavedBottom {
                text-align: center;
                margin: 0;
                padding: 8px;
                background: #F0FDF4;
                border-radius: 6px;
            }

            /* Red flags more prominent on mobile */
            .red-flag {
                padding: 12px;
            }

            .red-flag li {
                margin: 8px 0;
                line-height: 1.4;
            }

            /* Notes section better on mobile */
            .notes-section {
                padding: 15px;
            }

            .notes-section h3 {
                font-size: 1.1em;
            }
        }

        /* Even smaller phones */
        @media (max-width: 380px) {
            .header h1 {
                font-size: 1.2em;
            }

            .logo-text {
                font-size: 1.8em;
            }

            .section h2 {
                font-size: 1.1em;
            }

            .clear-btn {
                font-size: 0.95em;
                padding: 12px;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
    <div class="header">
        <a href="https://carbi.co" class="logo" style="text-decoration: none; cursor: pointer;">

            <svg width="110" height="40" viewBox="0 0 110 40">
                <circle cx="20" cy="20" r="6" fill="#0EA5E9" />
                <path d="M 28 20 L 43 20" stroke="url(#grad-header)" stroke-width="3" />
                <path d="M 38 14 L 45 20 L 38 26" fill="none" stroke="#1E40AF" stroke-width="3" stroke-linecap="round"
                    stroke-linejoin="round" />
                <defs>
                    <linearGradient id="grad-header" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0EA5E9;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <text x="50" y="27" font-family="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif" font-size="24"
                    font-weight="600" fill="#0F172A" text-anchor="start">carbi</text>
            </svg>
        </a>
        <h1>First Car Viewing Checklist</h1>
        <p class="subtitle">üçã Lemon Avoidance üçã</p>
        <div class="save-controls">
            <div>
                <button onclick="generatePDF()" class="clear-btn no-print">üíæ Save as PDF</button>
                <button onclick="clearDataOnly()" class="clear-btn secondary no-print">Start New Car</button>
            </div>
            <div id="lastSaved"></div>
        </div>
    </div>

    <div class="section">
        <h2><span class="icon">üìã</span>Before You Go</h2>
        <p><strong>Print this checklist or save it to your phone.</strong></p>

        <h3>What to Bring:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> This checklist</li>
            <li><input type="checkbox"> Driving license</li>
            <li><input type="checkbox"> Phone with torch/flashlight</li>
            <li><input type="checkbox"> Another sensible adult (if possible)</li>
            <li><input type="checkbox"> Pen for notes</li>
            <li><input type="checkbox"> Debit or Credit Card for deposit (if buying)</li>
        </ul>

        <h3>Research Done:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> Checked insurance group and got quote</li>
            <li><input type="checkbox"> Researched typical problems for this model</li>
            <li><input type="checkbox"> Confirmed market value on AutoTrader/Parkers</li>
            <li><input type="checkbox"> Checked the location of the dealership</li>
        </ul>
    </div>

    <div class="section">
        <h2><span class="icon">‚úÖ</span>Paperwork Check</h2>

        <h3>Essential Documents (Don't buy without these!):</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>V5C (Log Book)</strong> - check when the car was last bought or sold
            </li>
            <li><input type="checkbox"> <strong>MOT Certificate</strong> - and check the MOT history online</li>
            <li><input type="checkbox"> <strong>Service History</strong> - stamped book and/or receipts</li>
        </ul>

        <div class="red-flag">
            <h3>Warning Signs (Walk away if):</h3>
            <ul>
                <li>No V5C ("it's in the post")</li>
                <li>No service history on a car over 3 years old</li>
                <li>MOT expires within a couple of months</li>
                <li>Seller seems evasive about paperwork</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2><span class="icon">üîç</span>Exterior Inspection</h2>

        <h3>Body & Paint:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Rust spots</strong> - check wheel arches, door frames, bumpers</li>
            <li><input type="checkbox"> <strong>Dents & scratches</strong> - note location and severity</li>
            <li><input type="checkbox"> <strong>Paint match</strong> - mismatched colors or overspary suggests accident
                damage</li>
            <li><input type="checkbox"> <strong>Panel alignment</strong> - gaps should be even</li>
            <li><input type="checkbox"> <strong>Stone chips</strong> - normal on front bumper/bonnet</li>
        </ul>

        <h3>Tyres:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Tread depth</strong> - check wear indicators have some depth</li>
            <li><input type="checkbox"> <strong>Even wear</strong> - uneven wear suggests alignment issues</li>
            <li><input type="checkbox"> <strong>Correct pressure</strong> - should feel firm when pressed</li>
            <li><input type="checkbox"> <strong>Same brand</strong> - mixed and/or unknown brand tyres suggest poor
                maintenance</li>
            <li><input type="checkbox"> <strong>Spare tyre</strong> - check condition and pressure</li>
        </ul>

        <h3>Lights & Glass:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>All lights work</strong> - headlights, brake lights, indicators, hazards
            </li>
            <li><input type="checkbox"> <strong>Windscreen chips</strong> - small ones OK, cracks fail MOT</li>
            <li><input type="checkbox"> <strong>Mirror condition</strong> - cracked mirrors are dangerous</li>
            <li><input type="checkbox"> <strong>Number plates</strong> - should be secure and normal looking font</li>
        </ul>

        <div class="red-flag">
            <h3>Red Flags:</h3>
            <ul>
                <li>Significant rust (expensive to repair)</li>
                <li>More than 2 tyres need replacing (¬£200-400 cost)</li>
                <li>Major dents/scratches (check for exposed metal)</li>
            </ul>
        </div>
    </div>

    <div class="page-break"></div>

    <div class="section">
        <h2><span class="icon">ü™ë</span>Interior Check</h2>

        <h3>Seats & Comfort:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Driver's seat</strong> - not too worn, adjusts properly</li>
            <li><input type="checkbox"> <strong>All seatbelts</strong> - clip in securely, no fraying</li>
            <li><input type="checkbox"> <strong>Steering wheel</strong> - not excessively worn</li>
            <li><input type="checkbox"> <strong>Pedals</strong> - not worn through to metal</li>
        </ul>

        <h3>Electronics:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Radio/infotainment</strong> - works and stays on</li>
            <li><input type="checkbox"> <strong>Air conditioning</strong> - blows cold air</li>
            <li><input type="checkbox"> <strong>All switches</strong> - lights, wipers, windows, etc.</li>
            <li><input type="checkbox"> <strong>Warning lights</strong> - none illuminated when running</li>
            <li><input type="checkbox"> <strong>USB/charging ports</strong> - work properly</li>
        </ul>

        <h3>Practicality:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Boot space</strong> - adequate for your needs</li>
            <li><input type="checkbox"> <strong>Rear seats</strong> - fold down if needed</li>
            <li><input type="checkbox"> <strong>Storage compartments</strong> - glove box, door pockets work</li>
        </ul>

        <div class="red-flag">
            <h3>Red Flags:</h3>
            <ul>
                <li>Excessive wear on pedals (high mileage or hard use)</li>
                <li>Dashboard warning lights on</li>
                <li>Windows don't work (expensive electrical repair)</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2><span class="icon">üîß</span>Engine & Mechanical</h2>

        <h3>Under the Bonnet:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Oil level</strong> - should be between min/max on dipstick</li>
            <li><input type="checkbox"> <strong>Oil color</strong> - should be amber/black, not milky</li>
            <li><input type="checkbox"> <strong>Coolant level</strong> - visible in expansion tank</li>
            <li><input type="checkbox"> <strong>Belts</strong> - no fraying or cracks</li>
            <li><input type="checkbox"> <strong>Unusual noises</strong> - engine should run smoothly</li>
        </ul>

        <h3>Fluids & Leaks:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Check ground</strong> - no oil/coolant puddles where parked</li>
            <li><input type="checkbox"> <strong>Exhaust smoke</strong> - should be nearly invisible when warm</li>
            <li><input type="checkbox"> <strong>Brake fluid</strong> - visible in reservoir, not black/thick</li>
            <li><input type="checkbox"> <strong>Power steering</strong> - easy to turn when stationary</li>
        </ul>

        <div class="red-flag">
            <h3>Red Flags:</h3>
            <ul>
                <li>Milky oil or black gunk (head gasket problems - walk away)</li>
                <li>Oil/coolant leaks under car</li>
                <li>Blue smoke from exhaust (engine wear)</li>
                <li>Timing belt overdue (catastrophic if it snaps, check service history around the 60k mark)</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2><span class="icon">üõ£Ô∏è</span>Test Drive</h2>

        <h3>Pre-Drive Checks:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Fuel range</strong> - enough for test drive</li>
            <li><input type="checkbox"> <strong>Handbrake</strong> - holds car on slight slope</li>
            <li><input type="checkbox"> <strong>Mirrors</strong> - adjusted properly</li>
        </ul>

        <h3>During the Drive:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Clutch</strong> - engages smoothly, not slipping</li>
            <li><input type="checkbox"> <strong>Gears</strong> - select cleanly, no grinding</li>
            <li><input type="checkbox"> <strong>Brakes</strong> - car stops straight, no grinding noise</li>
            <li><input type="checkbox"> <strong>Steering</strong> - car drives straight, doesn't pull to one side</li>
            <li><input type="checkbox"> <strong>Engine</strong> - accelerates smoothly, no hesitation</li>
            <li><input type="checkbox"> <strong>Temperature</strong> - doesn't overheat during drive</li>
        </ul>

        <h3>Different Driving Conditions:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Cold start</strong> - engine starts easily from cold</li>
            <li><input type="checkbox"> <strong>City driving</strong> - smooth at low speeds</li>
            <li><input type="checkbox"> <strong>Motorway speed</strong> - stable at 60-70mph</li>
            <li><input type="checkbox"> <strong>Hill starts</strong> - clutch doesn't slip</li>
            <li><input type="checkbox"> <strong>Parking</strong> - easy to maneuver</li>
        </ul>

        <div class="red-flag">
            <h3>Red Flags:</h3>
            <ul>
                <li>Clutch slips or is very high/low</li>
                <li>Car pulls to one side (alignment/brake issues)</li>
                <li>Loud grinding noises when braking</li>
                <li>Engine overheats or warning lights appear</li>
            </ul>
        </div>
    </div>

    <div class="page-break"></div>

    <div class="section">
        <h2><span class="icon">üí∞</span>Negotiation & Buying</h2>

        <h3>Price Research:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Market value</strong> - checked AutoTrader/Parkers guide price</li>
            <li><input type="checkbox"> <strong>Similar cars</strong> - compared with others for sale locally</li>
            <li><input type="checkbox"> <strong>Condition adjustment</strong> - factor in any issues found</li>
            <li><input type="checkbox"> <strong>Negotiation room</strong> - some sellers expect haggling (check
                comparable cars first)</li>
        </ul>

        <h3>Final Checks:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Outstanding finance</strong> - use HPI check or ask directly</li>
            <li><input type="checkbox"> <strong>Write everything down</strong> - faults, agreements, contact details
            </li>
            <li><input type="checkbox"> <strong>Get receipt</strong> - with seller details and what's included</li>
            <li><input type="checkbox"> <strong>Arrange insurance</strong> - before you drive it home</li>
        </ul>

        <h3>Payment:</h3>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Card or bank transfer</strong> - avoid unusual payment methods</li>
            <li><input type="checkbox"> <strong>Receipt given</strong> - with full seller details</li>
            <li><input type="checkbox"> <strong>Keys & documents</strong> - get all keys, manuals, documents</li>
        </ul>

        <div class="red-flag">
            <h3>Red Flags:</h3>
            <ul>
                <li>Price seems way too good to be true (usually is)</li>
                <li>Seller pressuring quick decision</li>
                <li>Won't allow proper inspection</li>
                <li>Unusual payment requests</li>
            </ul>
        </div>
    </div>

    <div class="notes-section">
        <h3>üìù Your Notes Section</h3>

        <div class="form-row">
            <label>Make/Model:</label>
            <input type="text" placeholder="e.g. VW Golf GTI">
        </div>

        <div class="form-row">
            <label>Year:</label>
            <input type="text" style="flex: 0.3;">
            <label>Mileage:</label>
            <input type="text" style="flex: 0.7;">
        </div>

        <div class="form-row">
            <label>Price:</label>
            <input type="text" style="flex: 0.4;">
            <label>Insurance Group:</label>
            <input type="text" style="flex: 0.6;">
        </div>

        <h3 style="margin-top: 20px;">Issues Found:</h3>
        <textarea
            style="width: 100%; height: 100px; border: 1px solid #CBD5E1; border-radius: 5px; padding: 10px; resize: vertical; font-size: 16px;"></textarea>

        <div class="form-row" style="margin-top: 15px;">
            <label>Overall Rating:</label>
            <div class="rating">
                <span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span><span>‚≠ê</span>
            </div>
        </div>

        <div class="form-row">
            <label>Decision:</label>
            <label><input type="radio" name="decision" value="buy" style="margin: 0 5px 0 20px;"> Buy</label>
            <label><input type="radio" name="decision" value="keep_looking" style="margin: 0 5px 0 20px;"> Keep
                Looking</label>
            <label><input type="radio" name="decision" value="think_about_it" style="margin: 0 5px 0 20px;"> Think About
                It</label>
        </div>
    </div>

    <div class="cta-section">
        <h2>üõ†Ô∏è Complete Car Buying Toolkit</h2>
        <p>You've got the viewing checklist. Now grab the other essential tools:</p>

        <div style="display: grid; gap: 15px; margin: 25px 0; text-align: left;">
            <!-- Budget Calculator -->
            <a href="/downloads/budget-calculator/download.html" target="_blank" rel="noopener noreferrer"
                style="display: flex; align-items: center; gap: 15px; padding: 15px 20px; background: white; border: 2px solid #E2E8F0; border-radius: 10px; text-decoration: none; transition: all 0.3s ease;">
                <img src="/images/calculator-icon.png" alt="" style="width: 48px; height: 48px; flex-shrink: 0;">
                <div style="flex: 1;">
                    <div style="color: #0F172A; font-weight: 600; font-size: 1.1em;">First Car Budget Calculator</div>
                    <div style="color: #64748B; font-size: 0.95em;">Work out your realistic first year costs</div>
                </div>
            </a>

            <!-- Insurance Comparison -->
            <a href="/downloads/quote-comparison/download.html" target="_blank" rel="noopener noreferrer"
                style="display: flex; align-items: center; gap: 15px; padding: 15px 20px; background: white; border: 2px solid #E2E8F0; border-radius: 10px; text-decoration: none; transition: all 0.3s ease;">
                <img src="/images/Insurance-comparison-icon.png" alt=""
                    style="width: 48px; height: 48px; flex-shrink: 0;">
                <div style="flex: 1;">
                    <div style="color: #0F172A; font-weight: 600; font-size: 1.1em;">Insurance Quote Comparison</div>
                    <div style="color: #64748B; font-size: 0.95em;">Compare quotes side-by-side properly</div>
                </div>
            </a>

            <!-- This Checklist -->
            <div
                style="display: flex; align-items: center; gap: 15px; padding: 15px 20px; background: #f0f9ff; border: 2px solid #0EA5E9; border-radius: 10px;">
                <img src="/images/viewing-checklist-icon.png" alt="" style="width: 48px; height: 48px; flex-shrink: 0;">
                <div style="flex: 1;">
                    <div style="color: #0F172A; font-weight: 600; font-size: 1.1em;">Car Viewing Checklist</div>
                    <div style="color: #64748B; font-size: 0.95em;">You're here! Print or save this page</div>
                </div>
            </div>
        </div>

    </div>
    <div class="section safety-reminder">
        <h2><span class="icon">‚ö†Ô∏è</span>Final Safety Reminders</h2>
        <ul class="checklist">
            <li><input type="checkbox"> <strong>Never go alone</strong> - bring another sensible adult if possible</li>
            <li><input type="checkbox"> <strong>Trust your instincts</strong> - if something feels wrong, walk away</li>
            <li><input type="checkbox"> <strong>Don't rush</strong> - there are always other cars</li>
            <li><input type="checkbox"> <strong>Budget for repairs</strong> - even good cars need maintenance</li>
        </ul>

        <p style="text-align: center; margin-top: 20px; font-weight: 600; color: #92400E;">
            <strong>Remember: It's better to keep looking than buy the wrong car!</strong>
        </p>
    </div>

    <!-- Bottom save controls -->
    <div class="section" style="background: #F8FAFC; border: 2px solid #1E40AF;">
        <h2 style="text-align: center; color: #1E40AF; margin-bottom: 20px;">‚úÖ All Done?</h2>
        <div class="save-controls" style="border-top: none; padding-top: 0; margin-top: 0;">
            <div>
                <button onclick="generatePDF()" class="clear-btn no-print">üíæ Save as PDF</button>
                <button onclick="clearDataOnly()" class="clear-btn secondary no-print">Start New Car</button>
            </div>
            <div id="lastSavedBottom"></div>
        </div>
    </div>

    <div class="footer">
        <p>¬© 2025 Carbi <strong><a href="https://www.carbi.co" target="_blank"
                    style="color: #1E40AF; text-decoration: none;">carbi.co</a></strong></p>
    </div>

    <script>
        // localStorage key
        const STORAGE_KEY = 'carbi_checklist_data';

        // Save all form data to localStorage
        function saveToLocalStorage() {
            const data = {
                checkboxes: {},
                inputs: {},
                textarea: '',
                radio: '',
                rating: 0,
                lastSaved: new Date().toISOString()
            };

            // Save checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                data.checkboxes[index] = checkbox.checked;
            });

            // Save text inputs
            document.querySelectorAll('input[type="text"]').forEach((input, index) => {
                data.inputs[index] = input.value;
            });

            // Save textarea
            const textarea = document.querySelector('textarea');
            if (textarea) {
                data.textarea = textarea.value;
            }

            // Save radio button
            const selectedRadio = document.querySelector('input[name="decision"]:checked');
            if (selectedRadio) {
                data.radio = selectedRadio.value;
            }

            // Save star rating
            const stars = document.querySelectorAll('.rating span');
            stars.forEach((star, index) => {
                if (star.style.color === 'rgb(245, 158, 11)' || star.style.color === '#F59E0B') {
                    data.rating = index + 1;
                }
            });

            localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
            updateLastSavedIndicator();
        }

        // Load data from localStorage
        function loadFromLocalStorage() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (!saved) return;

            const data = JSON.parse(saved);

            // Restore checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                if (data.checkboxes[index]) {
                    checkbox.checked = true;
                    checkbox.parentElement.style.opacity = '0.7';
                    checkbox.parentElement.style.textDecoration = 'line-through';
                }
            });

            // Restore text inputs
            document.querySelectorAll('input[type="text"]').forEach((input, index) => {
                if (data.inputs[index]) {
                    input.value = data.inputs[index];
                }
            });

            // Restore textarea
            const textarea = document.querySelector('textarea');
            if (textarea && data.textarea) {
                textarea.value = data.textarea;
            }

            // Restore radio button
            if (data.radio) {
                const radio = document.querySelector(`input[name="decision"][value="${data.radio}"]`);
                if (radio) radio.checked = true;
            }

            // Restore star rating
            if (data.rating > 0) {
                const stars = document.querySelectorAll('.rating span');
                stars.forEach((star, index) => {
                    star.style.color = index < data.rating ? '#F59E0B' : '#D1D5DB';
                });
            }

            updateLastSavedIndicator();
        }

        // Update the last saved indicator
        function updateLastSavedIndicator() {
            const saved = localStorage.getItem(STORAGE_KEY);
            const indicators = [document.getElementById('lastSaved'), document.getElementById('lastSavedBottom')];

            if (saved) {
                const data = JSON.parse(saved);
                const savedDate = new Date(data.lastSaved);
                const now = new Date();
                const diffMinutes = Math.floor((now - savedDate) / 60000);

                let text = '';
                if (diffMinutes < 1) {
                    text = 'Saved just now';
                } else if (diffMinutes < 60) {
                    text = `Saved ${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`;
                } else {
                    text = `Saved ${savedDate.toLocaleString()}`;
                }

                indicators.forEach(indicator => {
                    if (indicator) {
                        indicator.textContent = text;
                        indicator.classList.add('visible');
                    }
                });
            }
        }

        // Clear all data and start fresh
        function clearDataOnly() {
            localStorage.removeItem(STORAGE_KEY);
            location.reload();
        }

        // Generate and download PDF
        async function generatePDF() {
            const button = event.target;
            button.disabled = true;
            const originalText = button.innerHTML;
            button.innerHTML = '<span class="spinner"></span>Generating PDF...';

            try {
                const { jsPDF } = window.jspdf;

                // Temporarily hide buttons for clean capture
                const allButtons = document.querySelectorAll('.save-controls');
                allButtons.forEach(el => el.style.visibility = 'hidden');

                // Capture the page as canvas
                const canvas = await html2canvas(document.body, {
                    scale: 2,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#ffffff'
                });

                // Show controls again
                allButtons.forEach(el => el.style.visibility = 'visible');

                // Create PDF
                const imgWidth = 210; // A4 width in mm
                const pageHeight = 297; // A4 height in mm
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;

                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgData = canvas.toDataURL('image/png');

                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;

                while (heightLeft > 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }

                // Get car details for filename
                const makeModel = document.querySelector('input[placeholder*="VW Golf"]')?.value || 'car';
                const filename = `carbi-checklist-${makeModel.replace(/\s+/g, '-').toLowerCase()}-${new Date().toISOString().split('T')[0]}.pdf`;

                pdf.save(filename);

                button.innerHTML = '‚úì PDF Saved!';
                setTimeout(() => {
                    button.disabled = false;
                    button.innerHTML = originalText;
                }, 2000);

            } catch (error) {
                console.error('PDF generation error:', error);
                button.disabled = false;
                button.innerHTML = '‚ùå Error - Try Again';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            }
        }

        // Make checkboxes interactive for digital use
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    this.parentElement.style.opacity = '0.7';
                    this.parentElement.style.textDecoration = 'line-through';
                } else {
                    this.parentElement.style.opacity = '1';
                    this.parentElement.style.textDecoration = 'none';
                }
                saveToLocalStorage();
            });
        });

        // Save inputs on change
        document.querySelectorAll('input[type="text"], textarea').forEach(input => {
            input.addEventListener('input', saveToLocalStorage);
        });

        // Save radio buttons on change
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', saveToLocalStorage);
        });

        // Interactive star rating
        document.querySelectorAll('.rating span').forEach((star, index) => {
            star.addEventListener('click', function () {
                const rating = index + 1;
                const allStars = this.parentElement.querySelectorAll('span');
                allStars.forEach((s, i) => {
                    s.style.color = i < rating ? '#F59E0B' : '#D1D5DB';
                });
                saveToLocalStorage();
            });
        });

        // Print function for browsers
        function printChecklist() {
            window.print();
        }

        // Load saved data on page load
        window.addEventListener('DOMContentLoaded', loadFromLocalStorage);
    </script>
</body>

</html>